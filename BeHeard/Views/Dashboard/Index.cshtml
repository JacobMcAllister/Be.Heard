@using BeHeard.Extensions
@model BeHeard.Models.DashboardViewModel
@{ 

}

@*<div class="row align-items-start vh-100">*@
@*<div class="row">
    <div class="col-12 p-5">
        <h2>Homer's Stats</h2>
    </div>
    <div class="col-6 p-3">
        <canvas id="line-chart"></canvas>
    </div>
    <div class="col-6 p-3">
        <canvas id="pie-chart"></canvas>
    </div>
</div>
*@

<!--user welcome-->
<div class="row">
    <div class="col-8 p-5 bg-white text-black text-xl-center">
        <h1>Hello,
        @{
            var thisSession = Context.Session.GetObjectFromJson<SessionModel>("thisSession");
            string Name = thisSession.FirstName + " " + thisSession.LastName;
            @Name
        }
        </h1>
    </div>
    <div class="col-4 p-5 bg-white text-black" text-center">
        <p>Current Date and Time:</p>
        <p><span id='date-time'></span></p>
    </div>
</div>

<!--user dashboard-->
<div class="container mt-5">
    <div class="row">
        <div class="col-8 p-5">
            <canvas id="line-chart"></canvas>
            <h2 class="mt-4 bg-white p-3">Goals</h2>>
            <h6 class="d-flex align-items-center mb-3 fw-bold py-3">Progress</h6>
            <small>Activity 1</small>
            <div class="progress mb-3" style="height: 5px">
                <div class="progress-bar bg-primary" role="progressbar" style="width: 60%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <small>Activity 2</small>
            <div class="progress mb-3" style="height: 5px">
                <div class="progress-bar bg-primary" role="progressbar" style="width: 72%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <small>Activity 3</small>
            <div class="progress mb-3" style="height: 5px">
                <div class="progress-bar bg-primary" role="progressbar" style="width: 50%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <small>Activity 4</small>
            <div class="progress mb-3" style="height: 5px">
                <div class="progress-bar bg-primary" role="progressbar" style="width: 90%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <small>Activity 5</small>
            <div class="progress mb-3" style="height: 5px">
                <div class="progress-bar bg-primary" role="progressbar" style="width: 80%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </div>
        <div class="col-4 p-5">
            <h2>To Do List</h2>
            <h6>Make a note of what you're working on!</h6>
            <div class="list-group list-group-numbered">
                <a href="#" class="list-group-item list-group-item-action">Practice</a>
                <a href="#" class="list-group-item list-group-item-action">More Practice</a>
                <a href="#" class="list-group-item list-group-item-action">Packet from Dr. Nick</a>
                <a href="#" class="list-group-item list-group-item-action">Meeting with Speech Path</a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-6 p-5">
            <canvas id="pie-chart"></canvas>
        </div>
        <div class="col-6 p-5">
            <h3>Notepad</h3>
            <div id="container">
                <textarea id="area" rows="10" cols="50"></textarea>
            </div>
            <div id="notepad_controls">
                <p><a href="#" class="button" button onclick="save()">Save</a>
                <a href="#" class="button" button onclick="clear()">Clear</a></p>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-6 p-5">
            <h2>Contact Information</h2>
            <h6>Reach out whenever you need help!</h6>
            <div class="list-group list-group-flush">
                <a href="#" class="list-group-item">Dr. Moira, 123-456-7890</a>
                <a href="#" class="list-group-item">Speech Path Clinic, 111-222-3333</a>
                <a href="#" class="list-group-item">Dr. Nick, 888-726-6660</a>
            </div>
        </div>
        <div class="col-6 p-5 bg-primary text-white text-center">
            <h6>Word of the day!</h6>
            <h1 class="text-uppercase">Aphasia</h1>
        </div>
    </div>
</div>

@section Scripts
{
    <script src="~/js/chart.js"></script>

    <script>
        //  Date and Time 
        var dt = new Date();
        document.getElementById('date-time').innerHTML = dt;

        function getRandomInt(max) {
            return Math.floor(Math.random() * max);
        }

        function numbers(NUMBER_CFG) {
            var label = []
            for (var i = 0; i < NUMBER_CFG.count; i++) {
                label.push(getRandomInt(NUMBER_CFG.max))
            }
            return label
        }

        /*
        //******Notepad not working yet (11/30)
        //  Notepad Function
        localStorage.setItem("note", "Put your notes here...");
        //var item = localStorage.getItem("note");
        function check_web_storage_support() {
            if (typeof (Storage) !== "undefined") {
                return (true);
            }
            else {
                alert("Web Storage unsupported!");
                return false;
            }
        }
        function display_saved_note() {
            if (check_web_storage_support() == true) {
                result = localStorage.getItem("note");
            }
            if (result === null) {
                result = "No note saved";
            }
            document.getElementById('area').value = result;
        }
        function save() {
            if (check_web_storage_support() == true) {
                var area = document.getElementById("area");
                if (area.value != '') {
                    localStorage.setItem("note", area.value);
                }
                else {
                    alert("Nothing to save");
                }
            }
        }
        function clear() {
            document.getElementById('area').value = '';
        }
        window.onload = function () {
            display_saved_note();
        }
        */

        const DATA_COUNT = 7;
        const NUMBER_CFG = { count: DATA_COUNT, min: 0, max: 100 };

        // const labels = Utils.months({ count: 7 });
        const labels = ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]
        const data = {
            labels: labels,
            datasets: [
                //{
                //    label: 'Dataset 1',
                //    data: Utils.numbers(NUMBER_CFG),
                //    borderColor: Utils.CHART_COLORS.red,
                //    backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5),
                //},
                {
                    label: 'Weekly Usage',
                    data: numbers(NUMBER_CFG),
                    borderColor: 'rgb(54, 162, 235)',
                    backgroundColor: 'rgb(54, 162, 235)'
                }
            ]
        };

        const config = {
            type: 'line',
            data: data,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: "Homer's Weekly Usage"
                    }
                }
            },
        };

        new Chart($('#line-chart'), config);

        const CHART_COLORS = {
            red: 'rgb(255, 99, 132)',
            orange: 'rgb(255, 159, 64)',
            yellow: 'rgb(255, 205, 86)',
            green: 'rgb(75, 192, 192)',
            blue: 'rgb(54, 162, 235)',
        //    purple: 'rgb(153, 102, 255)',
        //    grey: 'rgb(201, 203, 207)'
        };

        const DATA_COUNT2 = 5;
        const NUMBER_CFG2 = { count: DATA_COUNT2, min: 0, max: 100 };

        const data2 = {
            labels: ['Syllables','Simple Phrases','Simple Words','Complex Words','Complex Phrases'],
            datasets: [
                {
                    label: 'Proficiency',
                    data: numbers(NUMBER_CFG2),
                    backgroundColor: Object.values(CHART_COLORS)
                }
            ]
        };

        const config2 = {
            type: 'doughnut',
            data: data2,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: "Homer's Proficiency"
                    }
                }
            },
        };
        new Chart($('#pie-chart'), config2);
    </script>
}
